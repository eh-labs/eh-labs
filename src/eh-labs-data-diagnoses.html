<html><head><link rel="import" href="../bower_components/polymer/polymer.html">

<link rel="import" href="../bower_components/lodash-element/lodash.js.html">


</head><body><dom-module id="eh-labs-data-diagnoses">
  <script>
    const mockDataRareDiseases = [
      'Acidemia Isovaleric', 'Acoustic Neuroma',
'Alpha Thalassemia',
'Alpha Thalassemia X-linked Intellectual Disability Syndrome',
'Alpha-1 Antitrypsin Deficiency',
'Alpha-Mannosidosis',
'Alport Syndrome',
'AlstrÃ¶m Syndrome'
    ]

    Polymer({
      is: 'eh-labs-data-diagnoses',

      properties:{
        query: {
          type: String,
          readonly: true,
        },
        diagnoses: {
          type: Array,
          notify: true,
        },

        predefinedQueries: {
          type: Array,
          notify: true,
          value: []
        }

      },

      observers:['_debounceSetDiagnoses(query, predefinedQueries.*)'],

      attached(){

      },

      _debounceSetDiagnoses(query, trigger){
        const func = function(){
          this._trySetDisagnose(query)
        }

        this.debounce('setDiagnoses', func.bind(this), 300)
      },

      _trySetDisagnose(query){
        if (query.path) {
          const pre = this.get('predefinedQueries')
          const index = pre.findIndex((qry) => qry.path == query.path)

          if (index >= 0) {
            const path = 'predefinedQueries.' + index + '.results.' + (query.notes.length -1)
            if (this.get(path)) {
              this.set('diagnoses', this.get(path))
            }
          }
        } else {
          return ''
        }
      },

    });
  </script>
</dom-module>
</body></html>